<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Digital Address Locator</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>
* { box-sizing: border-box; }
body { margin:0; font-family:Arial, sans-serif; }
#map { position:fixed; top:0; bottom:0; left:0; right:0; z-index:0; }

/* ‚îÄ‚îÄ TOP SEARCH BAR ‚îÄ‚îÄ */
.search-box {
  position:fixed;
  top:12px;
  left:50%;
  transform:translateX(-50%);
  background:white;
  padding:8px 14px;
  border-radius:20px;
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
  z-index:1000;
  display:flex;
  gap:6px;
  align-items:center;
}
.search-box input {
  border:none;
  outline:none;
  font-size:14px;
  width:220px;
}

/* ‚îÄ‚îÄ LOCATE BUTTON ‚îÄ‚îÄ */
.control-box {
  position:fixed;
  top:80px;
  right:12px;
  background:white;
  padding:10px 12px;
  border-radius:16px;
  box-shadow:0 6px 18px rgba(0,0,0,0.3);
  z-index:1000;
}
.control-box button {
  border:none;
  background:none;
  cursor:pointer;
  font-size:14px;
}

/* ‚îÄ‚îÄ BOTTOM CODE PANEL ‚îÄ‚îÄ */
#info {
  position:fixed;
  bottom:-260px;
  left:0; right:0;
  background:white;
  padding:16px 20px 20px;
  border-radius:24px 24px 0 0;
  box-shadow:0 -6px 18px rgba(0,0,0,0.3);
  text-align:center;
  transition:bottom 0.3s;
  z-index:1000;
}
.code-box {
  background:#e6f6f4;
  padding:10px;
  border-radius:12px;
  font-weight:bold;
  font-size:16px;
  letter-spacing:1px;
}
#btn-open-directions {
  margin-top:12px;
  background:#2FAE9E;
  color:white;
  border:none;
  padding:10px 24px;
  border-radius:20px;
  font-size:14px;
  cursor:pointer;
  display:none;
}
#btn-open-directions:hover { background:#259e8f; }

/* ‚îÄ‚îÄ LEFT DIRECTIONS PANEL ‚îÄ‚îÄ */
#dir-panel {
  position:fixed;
  top:0; left:-400px;
  width:360px;
  height:100%;
  background:white;
  box-shadow:4px 0 20px rgba(0,0,0,0.2);
  z-index:2000;
  display:flex;
  flex-direction:column;
  transition:left 0.35s cubic-bezier(.4,0,.2,1);
  overflow:hidden;
}
#dir-panel.open { left:0; }

/* Panel Header */
#dir-header {
  background:#2FAE9E;
  color:white;
  padding:14px 16px 10px;
  flex-shrink:0;
}
#dir-header .title-row {
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:10px;
}
#dir-header h3 { margin:0; font-size:17px; }
#btn-close-dir {
  background:none;
  border:none;
  color:white;
  font-size:20px;
  cursor:pointer;
  line-height:1;
}

/* Travel Mode */
.mode-row {
  display:flex;
  gap:8px;
  margin-bottom:10px;
}
.mode-btn {
  flex:1;
  padding:6px 0;
  border:2px solid rgba(255,255,255,0.5);
  border-radius:20px;
  background:none;
  color:white;
  font-size:13px;
  cursor:pointer;
  transition:all 0.2s;
}
.mode-btn.active {
  background:white;
  color:#2FAE9E;
  border-color:white;
  font-weight:bold;
}

/* From / To inputs */
.input-group {
  display:flex;
  flex-direction:column;
  gap:6px;
  position:relative;
}
.input-row {
  display:flex;
  align-items:center;
  gap:8px;
  background:rgba(255,255,255,0.18);
  border-radius:10px;
  padding:6px 10px;
}
.input-row .dot {
  width:10px; height:10px;
  border-radius:50%;
  flex-shrink:0;
}
.dot-from { background:#fff; border:2px solid rgba(255,255,255,0.6); }
.dot-to   { background:#fff; }
.input-row input {
  flex:1;
  border:none;
  background:transparent;
  color:white;
  outline:none;
  font-size:13px;
}
.input-row input::placeholder { color:rgba(255,255,255,0.7); }

/* Swap button */
#btn-swap {
  position:absolute;
  right:10px;
  top:50%;
  transform:translateY(-50%);
  background:rgba(255,255,255,0.25);
  border:none;
  border-radius:50%;
  width:28px; height:28px;
  cursor:pointer;
  color:white;
  font-size:16px;
  display:flex;
  align-items:center;
  justify-content:center;
}
#btn-swap:hover { background:rgba(255,255,255,0.4); }

/* Go button */
#btn-go {
  margin-top:10px;
  width:100%;
  background:white;
  color:#2FAE9E;
  border:none;
  padding:10px;
  border-radius:20px;
  font-size:14px;
  font-weight:bold;
  cursor:pointer;
}
#btn-go:hover { background:#f0faf9; }

/* Panel Body (scrollable) */
#dir-body {
  flex:1;
  overflow-y:auto;
  padding:14px 16px;
}

/* Summary card */
#route-summary {
  display:none;
  background:#f0faf9;
  border-radius:12px;
  padding:12px 16px;
  margin-bottom:14px;
  text-align:center;
}
#route-summary .big { font-size:22px; font-weight:bold; color:#2FAE9E; }
#route-summary .sub { font-size:13px; color:#666; margin-top:2px; }

/* Steps list */
#steps-list {
  display:none;
  list-style:none;
  margin:0;
  padding:0;
}
#steps-list li {
  display:flex;
  gap:12px;
  align-items:flex-start;
  padding:10px 0;
  border-bottom:1px solid #f0f0f0;
  font-size:13px;
  color:#333;
  line-height:1.4;
}
#steps-list li:last-child { border-bottom:none; }
.step-icon {
  width:28px; height:28px;
  border-radius:50%;
  background:#e6f6f4;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-shrink:0;
  font-size:14px;
}
.step-dist {
  font-size:11px;
  color:#999;
  margin-top:2px;
}

/* Error / loading */
#dir-status {
  font-size:13px;
  color:#e74c3c;
  text-align:center;
  padding:8px 0;
  display:none;
}
#dir-loading {
  font-size:13px;
  color:#2FAE9E;
  text-align:center;
  padding:8px 0;
  display:none;
}

/* Clear route */
#btn-clear-route {
  display:none;
  width:100%;
  margin-top:10px;
  background:none;
  border:1px solid #ddd;
  padding:8px;
  border-radius:20px;
  font-size:13px;
  color:#888;
  cursor:pointer;
}
#btn-clear-route:hover { background:#f5f5f5; }
</style>
</head>
<body>

<div id="map"></div>

<!-- Top search bar -->
<div class="search-box">
  <input id="search" placeholder="Search place or building code">
  <button onclick="searchPlace()">üîç</button>
</div>

<!-- Locate button -->
<div class="control-box">
  <button onclick="locate()">üìç Locate</button>
</div>

<!-- Bottom building code panel -->
<div id="info">
  <b>Building Code</b><br><br>
  <div id="code" class="code-box">---</div>
  <button id="btn-open-directions" onclick="openDirectionsTo()">üß≠ Get Directions</button>
</div>

<!-- Left Directions Panel -->
<div id="dir-panel">

  <div id="dir-header">
    <div class="title-row">
      <h3>üß≠ Directions</h3>
      <button id="btn-close-dir" onclick="closeDirections()">‚úï</button>
    </div>

    <!-- Travel mode -->
    <div class="mode-row">
      <button class="mode-btn active" id="mode-driving" onclick="setMode('driving')">üöó Drive</button>
      <button class="mode-btn" id="mode-walking" onclick="setMode('walking')">üö∂ Walk</button>
    </div>

    <!-- From / To -->
    <div class="input-group">
      <div class="input-row">
        <span class="dot dot-from"></span>
        <input id="input-from" placeholder="From: place, code, or 'My Location'">
      </div>
      <div class="input-row">
        <span class="dot dot-to"></span>
        <input id="input-to" placeholder="To: place or building code">
      </div>
      <button id="btn-swap" onclick="swapLocations()" title="Swap">‚áÖ</button>
    </div>

    <button id="btn-go" onclick="getRoute()">Get Route</button>
  </div>

  <div id="dir-body">
    <div id="dir-loading">‚è≥ Finding route‚Ä¶</div>
    <div id="dir-status"></div>

    <div id="route-summary">
      <div class="big" id="summary-time">--</div>
      <div class="sub" id="summary-dist">--</div>
    </div>

    <ul id="steps-list"></ul>

    <button id="btn-clear-route" onclick="clearRoute()">‚úï Clear Route</button>
  </div>

</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>